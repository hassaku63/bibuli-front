version: 0.2
           
phases:
  install:
    commands:
      - pip install --upgrade pip
      - pip install --upgrade awscli
      - npm update -g npm
      - npm install
  build:
    commands:
      - echo Start build with ${BUILD_MODE} mode.
      - npm run build --mode ${BUILD_MODE}
  post_build:
    commands:
      - echo Deploy to s3://${DEPLOY_S3_BUCKET}
      - aws s3 sync dist s3://${DEPLOY_S3_BUCKET} --delete